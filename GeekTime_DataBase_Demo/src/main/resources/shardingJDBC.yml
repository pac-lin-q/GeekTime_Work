  # 配置真实数据源
  dataSources:
    # 配置第 1 个数据源
    ds_0:
      dataSourceClassName: com.zaxxer.hikari.HikariDataSource
      driverClassName: com.mysql.cj.jdbc.Driver
      jdbcUrl: jdbc:mysql://localhost:3306/ds_0?rewriteBatchedStatements=true
      username: root
      password: spdb1234
    # 配置第 2 个数据源
    ds_1:
      dataSourceClassName: com.zaxxer.hikari.HikariDataSource
      driverClassName: com.mysql.cj.jdbc.Driver
      jdbcUrl: jdbc:mysql://localhost:3306/ds_1?rewriteBatchedStatements=true
      username: root
      password: spdb1234

  rules:
    # 配置分片规则
    - !SHARDING
      tables:
        # 配置 t_order 表规则
        ds_order:
          actualDataNodes: ds_${0..1}.ds_order_${0..15}
          # 配置分库策略
          databaseStrategy:
            standard:
              shardingColumn: order_userid
              shardingAlgorithmName: database_inline
          # 配置分表策略
          tableStrategy:
            standard:
              shardingColumn: order_id
              shardingAlgorithmName: table_inline

      # 配置分片算法
      shardingAlgorithms:
        database_inline:
          type: INLINE
          props:
            algorithm-expression: ds_${order_userid % 2}
        table_inline:
          type: INLINE
          props:
            algorithm-expression: ds_order_${order_id % 16}
